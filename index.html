<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lojas Link App Baby</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: #f0f4f8; scroll-behavior: smooth; }
        header { background: #2D5A88; padding: 25px 10px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .titulo-app { color: #ffffff; font-size: 1.5rem; font-weight: bold; margin: 0; display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .container { padding: 15px; max-width: 800px; margin: auto; }
        .banner-container { width: 100%; height: 200px !important; border-radius: 20px; overflow: hidden; margin-bottom: 20px; background: #ffffff; position: relative; }
        .banner-wrapper { display: flex; width: 100%; height: 100%; transition: transform 0.8s ease-in-out; }
        .banner-link { min-width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; text-decoration: none; }
        .banner-img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .categorias { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; padding: 10px 0 20px; }
        @media (max-width: 600px) { .categorias { display: grid !important; grid-template-columns: repeat(4, 1fr); gap: 5px; } .cat-btn { max-width: 100% !important; padding: 10px 2px !important; font-size: 0.65rem !important; } }
        .cat-btn { background: white; padding: 10px 15px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; color: #2D5A88; border: none; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; flex: 1 1 auto; text-align: center; transition: 0.3s; }
        .cat-btn.active { background: #2D5A88 !important; color: white !important; }
        .busca-input { width: 100%; padding: 15px; border-radius: 30px; border: none; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: center; outline: none; box-sizing: border-box; margin-bottom: 20px; }
        .vitrine { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
        .produto-card { background: white; border-radius: 20px; padding: 12px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.05); display: flex; flex-direction: column; justify-content: space-between; position: relative; }
        .selo-destaque { position: absolute; top: 10px; left: 10px; background: #ff0000; color: white; font-size: 0.6rem; font-weight: bold; padding: 4px 8px; border-radius: 5px; z-index: 5; }
        .btn-ws-card { position: absolute; top: 10px; right: 10px; background: #25D366; border: none; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; }
        .btn-ws-card img { width: 18px; height: 18px; }
        .img-produto { width: 100%; height: 130px; object-fit: contain; border-radius: 15px; }
        .produto-cat-label { font-size: 0.6rem; text-transform: uppercase; color: #2D5A88; background: #eef2f7; padding: 2px 8px; border-radius: 10px; margin-top: 8px; font-weight: bold; align-self: center; }
        .produto-nome { font-size: 0.85rem; font-weight: 600; margin: 5px 0; height: 35px; overflow: hidden; }
        .produto-desc-label { font-size: 0.7rem; color: #777; margin-bottom: 8px; height: 30px; overflow: hidden; line-height: 1.2; }
        .produto-preco { color: #2D5A88; font-size: 1.1rem; font-weight: bold; margin-bottom: 10px; }
        .btn { display: flex; align-items: center; justify-content: center; gap: 4px; text-decoration: none; padding: 10px; border-radius: 12px; font-weight: bold; font-size: 0.7rem; text-transform: uppercase; }
        .btn-ml { background: #FFE600; color: #2D3277; }
        .btn-hotmart { background: #FF0000; color: white; }
        .btn-magalu { background: #0088F7; color: white; }
        .btn-amazon { background: #000000; color: #00A8E1; }
        .btn-shein { background: #000000; color: white; }
        .btn-shopee { background: #F76404; color: white; }
        .btn-temu { background: #C00000; color: white; }
        .btn-aliexpress { background: #F7254E; color: white; }
        .btn-monetizze { background: #004576; color: white; }
        
        #btnVoltarTopo { position: fixed; bottom: 20px; right: 20px; background: #2D5A88; color: white; border: none; width: 45px; height: 45px; border-radius: 50%; display: none; z-index: 1000; cursor: pointer; }
        .subtÃ­tulo-container { height: 35px; overflow: hidden; margin: 10px 0; }
        .subtÃ­tulo-rotativo { color: rgba(255, 255, 255, 0.9); font-size: 0.9rem; font-weight: bold; animation: rotacionar 10s infinite; }
        @keyframes rotacionar {
  0%, 20%   { transform: translateY(0); }       /* Item 1 */
  25%, 45%  { transform: translateY(-35px); }   /* Item 2 */
  50%, 70%  { transform: translateY(-70px); }   /* Item 3 */
  75%, 95%  { transform: translateY(-105px); }   /* Item 4 (O que nÃ£o estava aparecendo) */
  100%      { transform: translateY(0); } }       /* Volta suave para o inÃ­cio */

    </style>
<body>

<header id="topo">
    <div class="titulo-app">ğŸ¼ğŸ‘¶ğŸ» Loja Link App Baby ğŸ‘¶ğŸ½ğŸ¼</div>
    <div class="subtÃ­tulo-container">
     
       <div class="subtÃ­tulo-rotativo">Artigos de RecÃ©m Nascido ğŸ¼ (0 a 1 ano)</div>
       <div class="subtÃ­tulo-rotativo">Bueno Software ğŸ‘¨ğŸ»</div>
        <div class="subtÃ­tulo-rotativo">Lojas Link App ğŸ›’ğŸ›ï¸</div>
        <div class="subtÃ­tulo-rotativo">A maior loja de afiliados do Brasil ğŸ›’ğŸ›ï¸</div>
        
    </div>
    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 15px;">
        <button onclick="compartilharLoja()" style="background: #25D366; color: white; border: none; border-radius: 12px; padding: 10px 15px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px; height: 42px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="18"> Compartilhar Loja
        </button>
        <button onclick="irParaGrupo()" style="background: white; color: #007bff; border: none; border-radius: 12px; padding: 10px 15px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 5px; height: 42px;">
            ğŸšª Mais Lojas
        </button>
    </div>
</header>

<div class="container">
    <div class="banner-container">
        <div class="banner-wrapper" id="bannerApp"></div>
    </div>
    <div class="categorias" id="grupoCategorias">
        <button class="cat-btn active" onclick="filtrar('todos', this)">Todos âœ¨</button>
        <button class="cat-btn" onclick="filtrar('em-alta', this)">Em alta ğŸ”¥</button>
        <button class="cat-btn" onclick="filtrar('cursos', this)">Cursos ğŸ“</button>
        <button class="cat-btn" onclick="filtrar('enxoval', this)">Enxoval ğŸ§º</button>
        <button class="cat-btn" onclick="filtrar('higiene', this)">Higiene ğŸ§´</button>
        <button class="cat-btn" onclick="filtrar('quarto', this)">Quarto ğŸ›ï¸</button>
        <button class="cat-btn" onclick="filtrar('passeio', this)">Passeio ğŸ›’</button>
        <button class="cat-btn" onclick="filtrar('alimentaÃ§Ã£o', this)">AlimentaÃ§Ã£o ğŸ¥£</button>
    </div>
    <input type="text" id="inputBusca" class="busca-input" placeholder="ğŸ” Busque Nome, Loja ou PreÃ§o..." onkeyup="executarBusca()">
    <div id="vitrine" class="vitrine"></div>
</div>

<button id="btnVoltarTopo" onclick="voltarAoTopo()">â†‘</button>

<script>
    let todosOsProdutos = [];
    let categoriaAtual = 'todos';
    const sheetId = '1tPuavQtvVf147OX05Y4q8DIo5_HdtkmZelq4PCXq5eg';
    const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=loja`;

    const segmentosLojas = [
        { nome: "Artigos de RecÃ©m Nascido 0 a 1", emoji: "ğŸ‘¶" },
        { nome: "Artigos Pet em Geral", emoji: "ğŸ¾" },
        { nome: "Artigos Esportivos", emoji: "âš½" },
        { nome: "Artigos de InformÃ¡tica", emoji: "ğŸ’»" },
        { nome: "Moda Feminina", emoji: "ğŸ‘—" },
        { nome: "Moda Masculina", emoji: "ğŸ‘•" },
        { nome: "Celulares e AcessÃ³rios", emoji: "ğŸ“±" },
        { nome: "Cama, Mesa e Banho", emoji: "ğŸ›ï¸" },
        { nome: "Moda infantil 1 a 10 anos", emoji: "ğŸ‘¦" },
        { nome: "Moda Juvenil 11 a 17 anos", emoji: "ğŸ‘©â€ğŸ¦°" },
        { nome: "Moda Plus Size e King Size Masculino", emoji: "ğŸ‘•" },
        { nome: "Moda Plus Size e King Size Feminina", emoji: "ğŸ‘—" },
        { nome: "Camping, Pesca, Piscina e Praia", emoji: "ğŸ•ï¸" },
        { nome: "CosmÃ©ticos e Perfumaria", emoji: "ğŸ’„" },
        { nome: "Papelaria e EscritÃ³rio", emoji: "ğŸ“" },
        { nome: "PeÃ§as e AcessÃ³rios de Carro", emoji: "ğŸš—" },
        { nome: "PeÃ§as e AcessÃ³rios de Moto", emoji: "ğŸï¸" },
        { nome: "EletrodomÃ©sticos em Geral", emoji: "ğŸ“º" },
        { nome: "MÃ³veis e DecoraÃ§Ã£o", emoji: "ğŸ›‹ï¸" },
        { nome: "Instrumentos Musicais", emoji: "ğŸ¸" },
        { nome: "Ferramentas, Casa e ConstruÃ§Ã£o", emoji: "ğŸ› ï¸" },
        { nome: "Consoles, Jogos e AcessÃ³rios", emoji: "ğŸ®" },
        { nome: "ConteÃºdo e Entretenimento Nerd", emoji: "ğŸ¤“" },
        { nome: "Utilidades DomÃ©sticas", emoji: "ğŸ³" },
        { nome: "Moda Skate", emoji: "ğŸ›¹" },
        { nome: "Livros FÃ­sicos", emoji: "ğŸ“š" },
        { nome: "Brinquedos", emoji: "ğŸ§¸" },
        { nome: "Plantas, Jardim e Paisagismo", emoji: "ğŸŒ»" },
        { nome: "Malas e Viagem", emoji: "ğŸ§³" },
        { nome: "Artigos para Festa", emoji: "ğŸ¥³" },
        { nome: "Comidas e Bebidas", emoji: "ğŸ•" },
        { nome: "Artigos Hospitalares", emoji: "ğŸ¥" },
        { nome: "Tecnologia e Energia Solar", emoji: "â˜€ï¸" },
        { nome: "SeguranÃ§a e Monitoramento", emoji: "ğŸ›¡ï¸" },
        { nome: "Equipamentos para o campo", emoji: "ğŸšœ" },
        { nome: "Melhor Idade Masculino", emoji: "ğŸ‘´" },
        { nome: "Melhor Idade Feminino", emoji: "ğŸ‘µ" },
        { nome: "JÃ³ias e Semi-JÃ³ias", emoji: "ğŸ’" }
    ];

    window.onscroll = function() {
        const btn = document.getElementById("btnVoltarTopo");
        btn.style.display = (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) ? "block" : "none";
    };

    function voltarAoTopo() { window.scrollTo({top: 0, behavior: 'smooth'}); }

    async function carregarDados() {
        try {
            const response = await fetch(url);
            const text = await response.text();
            const jsonData = JSON.parse(text.substring(47).slice(0, -2));
            todosOsProdutos = jsonData.table.rows;
            todosOsProdutos.sort(() => Math.random() - 0.5);
            configurarBanners();
            mostrarProdutos();
        } catch (error) { console.error("Erro:", error); }
    }

    function configurarBanners() {
        const bannerWrapper = document.getElementById('bannerApp');
        let htmlBanners = '';
        let count = 0;
        todosOsProdutos.forEach((row) => {
            const imgBanner = (row.c[2] && row.c[2].v) ? row.c[2].v : '';
            const linkBanner = (row.c[1] && row.c[1].v) ? row.c[1].v : '#';
            if (imgBanner && imgBanner.includes('http')) {
                htmlBanners += `<a href="${linkBanner}" target="_blank" class="banner-link"><img src="${imgBanner}" class="banner-img"></a>`;
                count++;
            }
        });
        bannerWrapper.innerHTML = htmlBanners;
        if (count > 1) {
            let index = 0;
            setInterval(() => {
                index = (index + 1) % count;
                bannerWrapper.style.transform = `translateX(${index * -100}%)`;
            }, 4000);
        }
    }

    function mostrarProdutos(termo = '') {
        let html = '';
        const termoBusca = termo.toLowerCase().trim();
        todosOsProdutos.forEach((row) => {
            if (!row.c[3] || row.c[3].v === "Nome") return;
            const nome = row.c[3].v;
            const preco = row.c[4] ? (row.c[4].f || row.c[4].v).toString() : '0,00';
            const categoria = row.c[5] ? row.c[5].v : '';
            const destaque = row.c[6] ? row.c[6].v.toLowerCase() : '';
            const tipo = row.c[7] ? row.c[7].v.toLowerCase() : '';
            const foto = row.c[8] ? row.c[8].v : '';
            const link = row.c[9] ? row.c[9].v : '#';
            const desc = (row.c[10] && row.c[10].v) ? row.c[10].v : 'Clique para ver mais detalhes.';

            // BUSCA EM NOME, LOJA E PREÃ‡O
            const correspondeBusca = nome.toLowerCase().includes(termoBusca) ||
                                     tipo.includes(termoBusca) ||
                                     preco.includes(termoBusca);

            if ((categoriaAtual === 'todos' || categoria.toLowerCase().trim() === categoriaAtual || (categoriaAtual === 'em-alta' && destaque === 'sim')) && correspondeBusca) {
                let btnClass = 'btn-ml', btnTexto = `ğŸ›’ MERCADO LIVRE ğŸ¤ğŸ»`;
                if(tipo.includes('hotmart')) { btnClass = 'btn-hotmart'; btnTexto = `ğŸ›’ HOTMART ğŸ”¥`; }
                else if(tipo.includes('magalu')) { btnClass = 'btn-magalu'; btnTexto = `ğŸ›’ MAGALU ğŸ™‹ğŸ»â€â™‚ï¸`; }
                else if(tipo.includes('amazon')) { btnClass = 'btn-amazon'; btnTexto = `ğŸ›’ AMAZON ğŸ“¦`; }
                else if(tipo.includes('shopee')) { btnClass = 'btn-shopee'; btnTexto = `ğŸ›’ SHOPEE ğŸ›ï¸`; }
                else if(tipo.includes('shein')) { btnClass = 'btn-shein'; btnTexto = `ğŸ›’ SHEIN ğŸ·ï¸`; }
                else if(tipo.includes('temu')) { btnClass = 'btn-temu'; btnTexto = `ğŸ›’ TEMU ğŸ‘”`; }
                else if(tipo.includes('aliexpress')) { btnClass = 'btn-aliexpress'; btnTexto = `ğŸ›’ ALIEXPRESS ğŸ‘œ`; }
                else if(tipo.includes('monetizze')) { btnClass = 'btn-monetizze'; btnTexto = `ğŸ›’ MONETIZZE ğŸ’°`; }
               
                html += `<div class="produto-card">
                    ${destaque === 'sim' ? '<div class="selo-destaque">MAIS VENDIDO ğŸ”¥</div>' : ''}
                    <button class="btn-ws-card" onclick="compartilharProduto('${nome}', '${link}')"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg"></button>
                    <img src="${foto}" class="img-produto" onerror="this.src='https://via.placeholder.com/150'">
                    <div class="produto-cat-label">${categoria}</div>
                    <div class="produto-nome">${nome}</div>
                    <div class="produto-desc-label">${desc}</div>
                    <div class="produto-preco">R$ ${preco}</div>
                    <a href="${link}" target="_blank" class="btn ${btnClass}">${btnTexto}</a>
                </div>`;
            }
        });
        document.getElementById('vitrine').innerHTML = html;
    }

    function filtrar(cat, btn) {
        categoriaAtual = cat;
        // Remove 'active' de todos os botÃµes e coloca sÃ³ no clicado
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        if(btn) btn.classList.add('active');
        mostrarProdutos();
    }

    function executarBusca() { mostrarProdutos(document.getElementById('inputBusca').value); }

    async function compartilharProduto(nome, link) {
        if (navigator.share) {
            try { await navigator.share({ title: nome, text: `Olha isso: ${nome}`, url: link }); } catch (err) {}
        } else {
            window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(nome + ' ' + link)}`, '_blank');
        }
    }

    async function compartilharLoja() {
        if (navigator.share) {
            try { await navigator.share({ title: 'Loja Link App Baby', text: 'Confira!', url: window.location.href }); } catch (err) {}
        } else {
            window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(window.location.href)}`, '_blank');
        }
    }

    function irParaGrupo() {
        let modal = document.createElement('div');
        modal.id = "meuModalFlutuante";
        modal.style = "position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:9999; display:flex; justify-content:center; align-items:center;";
        let conteudo = document.createElement('div');
        conteudo.style = "background:#fff; width:90%; max-width:400px; max-height:80vh; overflow-y:auto; border-radius:15px; padding:20px; position:relative; font-family: sans-serif;";
      
        let linkA = "#";
        for(let i=0; i < todosOsProdutos.length; i++){
           if(todosOsProdutos[i].c[0] && todosOsProdutos[i].c[0].v && todosOsProdutos[i].c[0].v.includes('http')){
               linkA = todosOsProdutos[i].c[0].v;
               break;
           }
        }

        let htmlLista = `<h3 style="text-align:center; margin-bottom:20px;">Escolha uma Loja</h3>
            <button onclick="document.getElementById('meuModalFlutuante').remove()" style="position:absolute; top:10px; right:10px; border:none; background:none; font-size:20px; cursor:pointer;">âœ•</button>`;
      
        segmentosLojas.forEach((seg, index) => {
            let acao = (index === 0 && linkA !== "#")
                ? `<a href="${linkA}" target="_blank" style="background:#25D366; color:white; padding:6px 12px; border-radius:8px; text-decoration:none; font-size:12px; font-weight:bold;">Entrar</a>`
                : `<span style="color:#bbb; font-size:12px; font-style:italic;">Em breve ğŸš€</span>`;
            htmlLista += `<div style="display:flex; justify-content:space-between; align-items:center; padding:12px; border-bottom:1px solid #eee;"><span style="font-size:14px;">${seg.emoji} ${seg.nome}</span>${acao}</div>`;
        });
        conteudo.innerHTML = htmlLista;
        modal.appendChild(conteudo);
        document.body.appendChild(modal);
    }

    carregarDados();
    
   // Verifique se as aspas e os parÃªnteses estÃ£o assim:
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('PWA: Ativado com sucesso!'))
            .catch(err => console.log('PWA: Erro ao carregar', err));
    });
}
</script>
</body>
</html>
